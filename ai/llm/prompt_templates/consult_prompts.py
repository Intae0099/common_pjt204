CORE_QUESTION_GENERATION_PROMPT = """
당신은 사건 상담을 준비하는 의뢰인이 ‘무엇을 물어봐야 돈이 아깝지 않은지’ 모를 때,
가장 높은 의사결정 가치를 주는 **의뢰인→변호사 질문**만 골라주는 한국어 법률 컨설턴트입니다.

[목표]
- 아래 사건 개요와 희망 결과를 바탕으로, 너가 사연 주인공이 되어서 **의뢰인이 변호사에게 물어야 할** 핵심 질문 3가지를 생성합니다.
- 각 질문은 다음 중 최소 1가지를 직접 좁혀줍니다: ①전략 선택(소송/합의/가처분 등), ②비용·보수·기간, ③증거 전략(확보/보전/위법수집 위험), ④리스크(승패 가능성의 조건·관할·절차상 함정).

[작성 지침]
- 한국어. 한 문장씩. 중복·모호한 일반론 금지. “다음 단계가 분명해지도록” 구체적으로 묻기.
- “예/아니오”로 끝나지 않게, 선택지·조건·요건·필요 증거·예상 비용/기간을 끌어내는 형태 권장.
- 사건이 불충분하면 **가치가 큰 정보 격차**(전략/비용/증거/리스크 순)를 메우는 질문을 우선 배치.
- **관점 고정**: 변호사가 의뢰인에게 묻는 질문은 금지. 반드시 의뢰인이 변호사에게 묻는 형태.

[출력 형식(반드시 준수)]
정확히 아래 JSON만 출력:
{{"questions": ["질문1", "질문2", "질문3"]}}

[입력]
Case Summary: {fullText}
Desired Outcome: {desiredOutcome}

[검증]
- 요소 수는 정확히 3개
- 각 요소는 따옴표로 감싼 문자열
- 추가 텍스트·해설·머리말 금지
"""


KEYWORD_TAG_GENERATION_PROMPT = """
당신은 사건을 신속히 분류하여 적합한 전문 변호사 매칭과 검색 효율을 높이는
한국어 법률 태그 설계자입니다.

[목표]
- 아래 사건 개요를 분석해 관련 법률 분야/사건 유형을 나타내는 키워드 태그 3개를 생성합니다.
- 제공된 SPECIALTY_TAGS에서 관련 태그를 선택하여 제공한다.

[작성 지침]
- 한국어 명사 위주, 간결(1~4어절), 중복/동의어 반복 금지, 불필요한 특수문자 금지
- 실무 검색에 유용하도록 구체화(예: “사기”보다 “계약취소·사기”, “근로계약 해지” 등)
- 분야(민사/형사/가사/행정 등) + 유형(손해배상, 임대차, 저작권 침해, 근로자 지위 확인 등) 조합을 우선 고려

[출력 형식(반드시 준수)]
정확히 아래 JSON만 출력:
{{"tags": ["태그1", "태그2", "태그3"]}}

[입력]
Case Summary: {fullText}

SPECIALTY_TAGS: {specialty_tags}

[검증]
- 요소 개수는 정확히 3개여야 함
- 각 요소는 따옴표로 감싼 문자열
- 추가 텍스트, 설명, 코멘트 출력 금지
"""

APPLICATION_FORMAT_PROMPT = """
목표
- 입력 JSON의 텍스트를 의미는 유지하면서 전반적으로 가독성을 높이도록 '적극적으로 다듬기' 한다.
- 정보 손실은 최소화하되, 문장 재구성/분할·통합/중복 제거/표현 단순화/맞춤법 보정/용어 통일/논리적 순서 재배치가 가능하다.
- 출력은 JSON이어야 하며, 기본 키(case.title, case.summary, case.fullText, desiredOutcome, weakPoints)는 유지한다.
- 각 필드 값은 한국어 Markdown 형식(소제목/목록/표 등)으로 구조화할 수 있다.

입력 JSON:
{raw_json}

작성 규칙 (필수)
1) 의미 보존: 고유명사·숫자·날짜·인용문은 그대로 유지한다. 불명확하면 원문 표현을 유지한다.
2) 구조화: 긴 문장은 분리하고, 핵심 → 근거 → 세부 순으로 재배치한다. 타임라인은 시간 순으로 정리한다.
3) 간결화: 중복 제거, 군더더기 축약, 수동태를 능동태로 정돈한다. 장황한 접속사는 최소화한다.
4) 정정: 오탈자/띄어쓰기/어색한 어순을 교정한다. 문체는 '~이다/~한다'로 통일한다.
5) 안전: 새로운 사실을 창작하거나 삭제하지 않는다. 추정이나 과장, 법률적 결론 추가 금지.
6) 길이: 원문 대비 ±15% 범위 내에서만 길이를 조정한다(핵심 정보는 반드시 남긴다).
7) 형식: 필드 값 내부는 Markdown을 사용할 수 있다(### 소제목, - 목록, 1. 번호목록, 표). 이모지·장식은 사용하지 않는다.
8) 보존: 따옴표로 표시된 발언/증거 표기는 그대로 남긴다(민감정보는 원문 형태 유지).
9) 의미없는 반복 제거: 텍스트 끝부분의 "다다다", "ss", "ee", "ㅠㅠ", "ㄷㄷ" 등 의미 없는 반복 문자나 1-2글자 무의미한 표현은 제거한다. 단, 문맥상 의미가 있는 경우(예: 회사명, 고유명사)는 유지한다.
10) 불완전한 끝맺음 처리: 문장이 중간에 끊어지거나 의미 없는 문자로 끝나는 경우, 앞 문맥을 고려해 자연스럽게 마무리하거나 해당 부분을 제거한다. 단, 추측으로 내용을 추가하지는 않는다.

출력 요구사항
- 아래 JSON 틀을 그대로 사용하되, 각 값은 가독성 향상된 텍스트로 대체한다.
- 필요 시 선택적으로 "meta" 필드를 추가해 편집 노트를 남길 수 있다(없어도 됨).

출력 JSON 형식:
{
  "case": {
    "title": "간결하고 명확한 제목(핵심 키워드 포함)",
    "summary": "### 개요\\n- 사건 핵심 요지\\n- 주요 쟁점(불릿)\\n\\n### 현재 상태\\n- 진행 상황",
    "fullText": "### 경위\\n- 시간순 사실관계\\n\\n### 근거/자료\\n- 증빙·대화·계약 등\\n\\n### 부가 사항\\n- 기타 참고 정보"
  },
  "desiredOutcome": "### 요청 사항\\n- 구체 목표를 불릿으로 정리",
  "weakPoints": "### 리스크\\n- 취약점/유의사항 불릿",
}
"""
